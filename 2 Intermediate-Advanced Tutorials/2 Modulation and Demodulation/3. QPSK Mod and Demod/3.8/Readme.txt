Modified from https://github.com/gnuradio/gr-tutorial/tree/master/examples/tutorial7